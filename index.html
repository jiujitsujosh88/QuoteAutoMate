<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quote AutoMate</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f1115"/>

  <style>
    :root{
      --bg:#0f1115; --card:#151924; --text:#e9eef8; --muted:#a9b3c9;
      --accent:#3aa3ff; --border:#232836;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;}

    /* Header */
    .app-header{position:sticky;top:0;z-index:10;display:flex;align-items:center;
      justify-content:space-between;padding:12px 16px;background:linear-gradient(180deg,rgba(21,25,36,.95),rgba(21,25,36,.85));
      backdrop-filter: blur(8px);border-bottom:1px solid var(--border);}
    .app-title{font-weight:700;letter-spacing:.2px}
    .header-actions{display:flex;gap:8px;align-items:center}
    .chip{font-size:.78rem;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:#101521;}
    #net-status.online{color:#5ee17d} #net-status.offline{color:#ff8b8b}
    #sw-status{color:#a7c6ff}
    .link-btn{font-size:.78rem;padding:4px 8px;border-radius:8px;border:1px dashed var(--border);
      background:#121726;color:#e6ecff;cursor:pointer}

    /* Main */
    #tab-content{padding:16px;padding-bottom:96px;min-height:calc(100dvh - 120px);}
    .tab-pane{display:none}
    .tab-pane.active{display:block}
    .tab-pane::before{content:attr(aria-label);display:inline-block;font-weight:700;color:var(--muted);
      margin-bottom:10px;padding:6px 10px;border:1px solid var(--border);border-radius:8px;}
    .placeholder{margin-top:8px;padding:12px;border:1px dashed var(--border);border-radius:8px;color:var(--muted);}

    /* Bottom Tabbar (5 buttons + More) */
    .tabbar{position:fixed;bottom:0;left:0;right:0;z-index:20;display:grid;grid-template-columns:repeat(6,1fr);
      gap:0;padding:8px;border-top:1px solid var(--border);
      background:linear-gradient(180deg,rgba(15,17,21,.8),rgba(15,17,21,.95));backdrop-filter: blur(8px);}
    .tab-btn{background:transparent;color:var(--muted);border:none;padding:10px 6px;border-radius:10px;font-weight:600;letter-spacing:.2px}
    .tab-btn.active{color:var(--text);background:rgba(58,163,255,.14);}

    /* More dialog */
    dialog.more{border:none;padding:0;background:transparent}
    .more-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35)}
    .more-sheet{position:fixed;left:0;right:0;bottom:0;background:var(--card);
      border-top-left-radius:18px;border-top-right-radius:18px;border:1px solid var(--border);
      padding:12px;animation:slideUp .18s ease-out;}
    @keyframes slideUp{from{transform:translateY(20px);opacity:.6}to{transform:translateY(0);opacity:1}}
    .more-title{font-weight:700;padding:6px 4px 10px 4px;}
    .more-item,.more-close,.more-update{width:100%;text-align:left;margin:6px 0;background:#101521;color:var(--text);
      border:1px solid var(--border);border-radius:10px;padding:12px}
    .more-close{text-align:center;background:#182034}
    .more-update{border-style:dashed}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <div class="app-title">Quote AutoMate</div>
    <div class="header-actions">
      <span id="sw-status" class="chip">SW: …</span>
      <span id="net-status" class="chip">…</span>
      <button id="force-update-top" class="link-btn" type="button">Force Update</button>
    </div>
  </header>

  <!-- Main content -->
  <main id="tab-content">
    <!-- Primary Tabs -->
    <section id="tab-quotes" class="tab-pane" role="region" aria-label="Quotes"></section>
    <section id="tab-history" class="tab-pane" role="region" aria-label="History"></section>
    <section id="tab-customers" class="tab-pane" role="region" aria-label="Customers"></section>
    <section id="tab-presets" class="tab-pane" role="region" aria-label="Presets"></section>
    <section id="tab-analytics" class="tab-pane" role="region" aria-label="Analytics"></section>
    <!-- Secondary Tabs (via More) -->
    <section id="tab-settings" class="tab-pane" role="region" aria-label="Settings" hidden></section>
    <section id="tab-business" class="tab-pane" role="region" aria-label="Business Info" hidden></section>
    <section id="tab-resources" class="tab-pane" role="region" aria-label="Resources" hidden></section>
  </main>

  <!-- Bottom Tab Bar -->
  <nav class="tabbar" aria-label="Bottom Tabs">
    <button class="tab-btn" data-tab="quotes" aria-label="Quotes">Quotes</button>
    <button class="tab-btn" data-tab="history" aria-label="History">History</button>
    <button class="tab-btn" data-tab="customers" aria-label="Customers">Customers</button>
    <button class="tab-btn" data-tab="presets" aria-label="Presets">Presets</button>
    <button class="tab-btn" data-tab="analytics" aria-label="Analytics">Analytics</button>
    <button class="tab-btn" data-tab="more" aria-label="More">More</button>
  </nav>

  <!-- More dialog -->
  <dialog id="moreDialog" class="more">
    <div class="more-backdrop" data-close></div>
    <div class="more-sheet" role="dialog" aria-modal="true" aria-labelledby="more-title">
      <div id="more-title" class="more-title">More</div>
      <button class="more-item" data-tab="settings">Settings</button>
      <button class="more-item" data-tab="business">Business Info</button>
      <button class="more-item" data-tab="resources">Resources</button>
      <button class="more-update" id="force-update-more">Force Update (clear cache & reload)</button>
      <button class="more-close" data-close>Close</button>
    </div>
  </dialog>

  <script src="app.js"></script>
</body>
</html>